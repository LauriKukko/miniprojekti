<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lokaatio</title>

    <style>
        #mapdiv{
            height:500px;
            width:500px;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
    <script src="lokaatio.js"></script>
</head>

<body>
<div id="mapdiv"></div>
<script src="http://www.openlayers.org/api/OpenLayers.js"></script>

<script>

    function haeKayttaja(){
        navigator.geolocation.getCurrentPosition(success, error,{enableHighAccuracy:true});
        function success(data){
            console.dir("käyttäjän paikannus: " + data.coords.latitude + ", " + data.coords.longitude)
        }
        function error(e) {
            console.dir(e)
        }
        return data.coords.longitude +","+ data.coords.latitude;
    }

    map = new OpenLayers.Map("mapdiv");
    map.addLayer(new OpenLayers.Layer.OSM());

    var lonLat = new OpenLayers.LonLat(24.8302072, 60.1772711)
        .transform(
            new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
            map.getProjectionObject() // to Spherical Mercator Projection
        );


    // 24.8302072, 60.1772711
    //haeKayttaja() <- aseta OpenLayers objectiin arvoksi kun toimii
    var zoom=16;

    var markers = new OpenLayers.Layer.Markers( "Markers" );
    map.addLayer(markers);

    markers.addMarker(new OpenLayers.Marker(lonLat));

    map.setCenter (lonLat, zoom);

</script>
</body></html>